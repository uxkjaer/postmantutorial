/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/BadgeCustomData","sap/base/Log"],function(t,e){"use strict";var a="sapMBadge";var i={topLeft:"sapMBadgeTopLeft",topRight:"sapMBadgeTopRight",inline:"sapMBadgeInline"};var s=function(){if(typeof this.isA!=="function"||!this.isA("sap.ui.core.Control")){e.error("Badge enablement could be applied over controls only");return}this.initBadgeEnablement=function(t){this._oBadgeConfig=t;this.addEventDelegate({onAfterRendering:o},this)};function s(t,e){if(t.suffix){return e.$(t.suffix)}if(t.selector){return e.$().find(t.selector).first()}}function o(){this._isBadgeAttached=false;if(!this.getBadgeCustomData()||!d(this.getBadgeCustomData().getValue())){return false}this._oBadgeContainer=this._oBadgeConfig&&this._oBadgeConfig.selector?s(this._oBadgeConfig.selector,this):this.$();var t=jQuery("<div></div>").addClass(a+"Indicator");t.attr("id",this.getId()+a);t.attr("data-badge",this._oBadgeCustomData.getValue());t.appendTo(this._oBadgeContainer);this._oBadgeContainer.addClass(a);this._isBadgeAttached=true;if(!this._oBadgeConfig){return this}if(this._oBadgeConfig.position){this._oBadgeContainer.addClass(i[this._oBadgeConfig.position])}if(this._oBadgeConfig.accentColor){this._oBadgeContainer.addClass(a+this._oBadgeConfig.accentColor)}return this}function n(){this._oBadgeContainer.removeClass(a);jQuery("#"+this.getId()+a).remove();this._isBadgeAttached=false;return this}this.updateBadge=function(t){if(d(t)){if(this._isBadgeAttached){jQuery("#"+this.getId()+a).attr("data-badge",t)}else{o.call(this)}}else if(this._isBadgeAttached){n.call(this)}};function d(t){return t!==undefined&&t!=="undefined"&&t!==""}this.addCustomData=function(t){if(t.isA("sap.m.BadgeCustomData")){this.removeAggregation("customData",this._oBadgeCustomData,true);this._oBadgeCustomData=t;this.addAggregation("customData",t,true);return this.updateBadge(t.getValue())}return this.addAggregation("customData",t)};this.insertCustomData=function(t){if(t.isA("sap.m.BadgeCustomData")){this.updateBadge(t.getValue());this.removeAggregation("customData",this._oBadgeCustomData,true);this._oBadgeCustomData=t;return this.addAggregation("customData",t,true)}return this.insertAggregation("customData",t)};this.getBadgeCustomData=function(){var e=this.getCustomData().filter(function(e){return e instanceof t});return e.length?e[0]:undefined};this.removeBadgeCustomData=function(){var t;t=this._oBadgeCustomData;this._oBadgeCustomData=null;this.updateBadge();return this.removeAggregation("customData",t,true)}};return s});